<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



  <meta name="google-site-verification" content="3W1ar6zfFsnaL1sEvDzeytVUVg5oGeuj2l0iM0svaJw">













  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  

  

  

  

  

  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css">


  <meta name="keywords" content="React,">





  <link rel="alternate" href="/atom.xml" title="Kevin's Notes" type="application/atom+xml">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1">






<meta name="description" content="åœ¨æœ¬å‘¨(11æœˆ16æ—¥)å°ç»„çš„å‰ç«¯æŠ€èƒ½åˆ†äº«ä¼šä¸Šï¼Œæˆ‘ä½œäº†ä¸»é¢˜ä¸ºâ€œReactæœåŠ¡ç«¯æ¸²æŸ“åˆæ¢â€çš„å‰ç«¯åˆ†äº«ï¼Œåˆ†äº«è®¨è®ºçš„ä¸»è¦å†…å®¹æ˜¯å¦‚ä½•ä½¿ç”¨Reactå®ŒæˆæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ŒåŠå°è¯•ä½¿ç”¨ Next.jsæ„å»ºæœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨ï¼Œä¹Ÿæ˜¯æˆ‘ç¬¬ä¸€æ¬¡è¾¹è®²è¾¹ç ä»£ç ï¼Œè™½ç„¶ä¸­é€”å‡ºäº†bug,ä½†è¿˜å¥½é¡ºåˆ©åœ°è§£å†³å¹¶å®Œæˆäº†æ¼”ç¤ºï¼Œæœ¬æ–‡æ˜¯åŸºäºæˆ‘çš„keynoteåšçš„åˆ†äº«å†…å®¹æ€»ç»“ã€‚ #å…³äºIsomorphicå’ŒUniversalä»ç¤¾åŒºçš„ä¸¤ä¸ªæœ¯è¯­ï¼šisomor">
<meta name="keywords" content="React">
<meta property="og:type" content="article">
<meta property="og:title" content="ReactæœåŠ¡ç«¯æ¸²æŸ“(SSR)åˆæ¢">
<meta property="og:url" content="https://wuxinhua.com/2017/11/20/React-ssr-exploration/index.html">
<meta property="og:site_name" content="Kevin&#39;s Notes">
<meta property="og:description" content="åœ¨æœ¬å‘¨(11æœˆ16æ—¥)å°ç»„çš„å‰ç«¯æŠ€èƒ½åˆ†äº«ä¼šä¸Šï¼Œæˆ‘ä½œäº†ä¸»é¢˜ä¸ºâ€œReactæœåŠ¡ç«¯æ¸²æŸ“åˆæ¢â€çš„å‰ç«¯åˆ†äº«ï¼Œåˆ†äº«è®¨è®ºçš„ä¸»è¦å†…å®¹æ˜¯å¦‚ä½•ä½¿ç”¨Reactå®ŒæˆæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ŒåŠå°è¯•ä½¿ç”¨ Next.jsæ„å»ºæœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨ï¼Œä¹Ÿæ˜¯æˆ‘ç¬¬ä¸€æ¬¡è¾¹è®²è¾¹ç ä»£ç ï¼Œè™½ç„¶ä¸­é€”å‡ºäº†bug,ä½†è¿˜å¥½é¡ºåˆ©åœ°è§£å†³å¹¶å®Œæˆäº†æ¼”ç¤ºï¼Œæœ¬æ–‡æ˜¯åŸºäºæˆ‘çš„keynoteåšçš„åˆ†äº«å†…å®¹æ€»ç»“ã€‚ #å…³äºIsomorphicå’ŒUniversalä»ç¤¾åŒºçš„ä¸¤ä¸ªæœ¯è¯­ï¼šisomor">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2020-12-31T12:01:49.408Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ReactæœåŠ¡ç«¯æ¸²æŸ“(SSR)åˆæ¢">
<meta name="twitter:description" content="åœ¨æœ¬å‘¨(11æœˆ16æ—¥)å°ç»„çš„å‰ç«¯æŠ€èƒ½åˆ†äº«ä¼šä¸Šï¼Œæˆ‘ä½œäº†ä¸»é¢˜ä¸ºâ€œReactæœåŠ¡ç«¯æ¸²æŸ“åˆæ¢â€çš„å‰ç«¯åˆ†äº«ï¼Œåˆ†äº«è®¨è®ºçš„ä¸»è¦å†…å®¹æ˜¯å¦‚ä½•ä½¿ç”¨Reactå®ŒæˆæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ŒåŠå°è¯•ä½¿ç”¨ Next.jsæ„å»ºæœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨ï¼Œä¹Ÿæ˜¯æˆ‘ç¬¬ä¸€æ¬¡è¾¹è®²è¾¹ç ä»£ç ï¼Œè™½ç„¶ä¸­é€”å‡ºäº†bug,ä½†è¿˜å¥½é¡ºåˆ©åœ°è§£å†³å¹¶å®Œæˆäº†æ¼”ç¤ºï¼Œæœ¬æ–‡æ˜¯åŸºäºæˆ‘çš„keynoteåšçš„åˆ†äº«å†…å®¹æ€»ç»“ã€‚ #å…³äºIsomorphicå’ŒUniversalä»ç¤¾åŒºçš„ä¸¤ä¸ªæœ¯è¯­ï¼šisomor">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"right","display":"hide","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://wuxinhua.com/2017/11/20/React-ssr-exploration/">





  <title>ReactæœåŠ¡ç«¯æ¸²æŸ“(SSR)åˆæ¢ | Kevin's Notes</title>
  













</head>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-146717212-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-146717212-1');
</script>
<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Kevin's Notes</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description"></h1>
      
  </div>

  <div class="site-nav-toggle">
    <button role="presentation">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archive
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://wuxinhua.com/2017/11/20/React-ssr-exploration/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wuxinhua">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kevin's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">ReactæœåŠ¡ç«¯æ¸²æŸ“(SSR)åˆæ¢</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-11-20T11:16:30+08:00">
                2017-11-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>åœ¨æœ¬å‘¨(11æœˆ16æ—¥)å°ç»„çš„å‰ç«¯æŠ€èƒ½åˆ†äº«ä¼šä¸Šï¼Œæˆ‘ä½œäº†ä¸»é¢˜ä¸ºâ€œReactæœåŠ¡ç«¯æ¸²æŸ“åˆæ¢â€çš„å‰ç«¯åˆ†äº«ï¼Œåˆ†äº«è®¨è®ºçš„ä¸»è¦å†…å®¹æ˜¯å¦‚ä½•ä½¿ç”¨Reactå®ŒæˆæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ŒåŠå°è¯•ä½¿ç”¨ Next.jsæ„å»ºæœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨ï¼Œä¹Ÿæ˜¯æˆ‘ç¬¬ä¸€æ¬¡è¾¹è®²è¾¹ç ä»£ç ï¼Œè™½ç„¶ä¸­é€”å‡ºäº†bug,ä½†è¿˜å¥½é¡ºåˆ©åœ°è§£å†³å¹¶å®Œæˆäº†æ¼”ç¤ºï¼Œæœ¬æ–‡æ˜¯åŸºäºæˆ‘çš„keynoteåšçš„åˆ†äº«å†…å®¹æ€»ç»“ã€‚</p>
<h5 id="å…³äºIsomorphicå’ŒUniversal"><a href="#å…³äºIsomorphicå’ŒUniversal" class="headerlink" title="#å…³äºIsomorphicå’ŒUniversal"></a>#å…³äºIsomorphicå’ŒUniversal</h5><p>ä»ç¤¾åŒºçš„ä¸¤ä¸ªæœ¯è¯­ï¼šisomorphic(åŒæ„) å’Œ universal(é€šç”¨)å¼€å§‹æœ¬ç¯‡æ–‡ç« :</p>
<blockquote>
<p>â€œIsomorphic means running the same code on the client and the server.â€  </p>
<p>â€œUniversal means that it runs not only on servers and browsers, but on native devices and embedded architectures as well.â€  </p>
</blockquote>
<p>â€œIsomorphic JavaScriptâ€è¡¨ç¤ºJavaScriptä»£ç å¯ä»¥åœ¨ServeråŠClientä¸¤ç«¯æ‰§è¡Œã€‚<br>åœ¨ç›®å‰ç¤¾åŒºæœ€ç«çš„å‡ ä¸ªå‰ç«¯æ¡†æ¶ä¸­ï¼Œä¸ç®¡æ˜¯Angularè¿˜æ˜¯Reactï¼Œåœ¨githubä¸Šéƒ½ä¼šæœ‰å¾ˆå¤šå¸¦è¿™ä¸¤ä¸ªå…³é”®å­—çš„è„šæ‰‹æ¶å’Œç¤ºä¾‹ï¼Œå‰ç«¯åŒæ„æ…¢æ…¢å˜æˆäº†ä¸€ç§æµè¡Œçš„æ„å»ºæ–¹å¼ï¼›Reactæ¯”è¾ƒå¸å¼•æˆ‘çš„åœ°æ–¹ä¹‹ä¸€å°±åœ¨äºå®ƒçš„å®¢æˆ·ç«¯-æœåŠ¡ç«¯â€œåŒæ„â€ç‰¹å¾ï¼ŒReactçš„ç»„ä»¶ã€ä»£ç èƒ½å¤Ÿå®ç°æœ€å¤§ç¨‹åº¦çš„å¤ç”¨ï¼Œè€ŒæœåŠ¡ç«¯æ¸²æŸ“å°±æ˜¯åŒæ„çš„ä¸€ä¸ªéå¸¸å¥½çš„ä¾‹å­ï¼›åœ¨Node.jså‡ºç°ä¹‹å‰ï¼Œå‰ç«¯å¼€å‘çš„ä¸»è¦è¯­è¨€å’ŒæŠ€èƒ½æ˜¯HTML/CSS/Javascript,åç«¯ä¸€èˆ¬åŸºäºJava/PHPç­‰è¯­è¨€ï¼Œåœ¨PHPå’ŒJSP/ASPå¤§è¡Œå…¶é“çš„æ—¶å€™ï¼Œä¸€åˆ‡å†…å®¹éƒ½æ˜¯æœåŠ¡ç«¯æ¸²æŸ“ï¼›éšç€å‰ç«¯æŠ€æœ¯ã€æ¡†æ¶çš„å‘å±•å’Œå´›èµ·ï¼Œä¸ºäº†èŠ‚çœæœåŠ¡å™¨èµ„æºï¼Œå‡ºç°äº†å‰åç«¯åˆ†ç¦»çš„æ¨¡å¼ï¼Œå„ç«¯ä¸“æ³¨äºè‡ªå·±çš„é‚£ä¸€éƒ¨åˆ†ï¼›å†åæ¥Node.jsç»™æˆ‘ä»¬å¸¦æ¥äº†åœ¨æœåŠ¡ç«¯ä½¿ç”¨Javascriptçš„æœºä¼šï¼ŒJavascriptæ…¢æ…¢æ¸—é€åˆ°æœåŠ¡ç«¯ï¼Œå‰åç«¯åŒæ„çš„æ–¹å¼å†æ¬¡è¢«æ‹¿å‡ºæ¥è®¨è®ºå¹¶å®è·µã€‚  </p>
<p>åœ¨è®¡ç®—æœºç§‘å­¦é¢†åŸŸï¼Œæœ‰ä¸¤å¤§éš¾é¢˜ï¼Œå¦‚ä½•è®©ç¼“å­˜å¤±æ•ˆ(cache invalidation)å’Œå¦‚ä½•ç»™å„ç§ä¸œè¥¿å‘½åï¼Œç¡®å®â€œåŒæ„â€è¿™ä¸ªè¯å¹¶ä¸æ˜¯å¾ˆç›´è§‚ï¼Œæœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œäºæ˜¯å°±æœ‰äººæå‡ºç»™å®ƒæ¢ä¸ªåç§°ï¼ŒMicheal Jackson(<a href="https://github.com/mjackson" target="_blank" rel="noopener">@mjackson</a>) æå‡ºäº†ä½¿ç”¨â€œUniversal JavaScriptâ€ä½œç‚ºæ–°çš„å‘½åï¼Œæ„åœ¨è¯´æ˜ä¸ä»…ä»…æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼Œè€Œæ˜¯æ‰€æœ‰åœ°æ–¹;ä½†æˆ‘ä¸ªäººè®¤ä¸ºUniversalè¿™ä¸ªè¯è¿‡äºå®½æ³›äº†ï¼Œå¯¹äºæˆ‘ä»¬æ¥è¯´ä»ç„¶æ˜¯ä¸€å¤´é›¾æ°´ï¼Œå…·ä½“å¯ä»¥åœ¨Reactä¸ŠæŸ¥çœ‹è¿™ä¸ª<a href="https://github.com/facebook/react/pull/4041#issuecomment-109420008" target="_blank" rel="noopener">pr</a>ã€‚   </p>
<h5 id="ä»€ä¹ˆæ˜¯æœåŠ¡ç«¯æ¸²æŸ“-SRR-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æœåŠ¡ç«¯æ¸²æŸ“-SRR-ï¼Ÿ" class="headerlink" title="#ä»€ä¹ˆæ˜¯æœåŠ¡ç«¯æ¸²æŸ“(SRR)ï¼Ÿ"></a>#ä»€ä¹ˆæ˜¯æœåŠ¡ç«¯æ¸²æŸ“(SRR)ï¼Ÿ</h5><p>SSR(Server side Render)æœåŠ¡ç«¯æ¸²æŸ“ï¼Œé¡¾åæ€ä¹‰é¡µé¢çš„æ¸²æŸ“å·¥ä½œå°†åœ¨æœåŠ¡ç«¯å®Œæˆï¼Œç›®å‰é€šå¸¸æœ‰ä¸¤ç§é€‰æ‹©ï¼šSSR(æœåŠ¡å™¨æ¸²æŸ“) ä¸ CSR(å®¢æˆ·ç«¯æ¸²æŸ“)ï¼Œæ— è®ºå“ªç§æ–¹å¼ï¼Œæœ€ç»ˆç”¨æˆ·æ‰€çœ‹åˆ°çš„é¡µé¢æ˜¯ä¸€è‡´çš„ã€‚ï¼ˆä»¥ä¸‹SSRä»£è¡¨æœåŠ¡ç«¯æ¸²æŸ“ã€CSRä»£è¡¨å®¢æˆ·ç«¯æ¸²æŸ“ï¼‰</p>
<h5 id="CSR-vs-SSR"><a href="#CSR-vs-SSR" class="headerlink" title="#CSR vs SSR"></a>#CSR vs SSR</h5><ol>
<li>åŸæœ¬ç”±æœåŠ¡å™¨æ‰§è¡Œçš„æ¸²æŸ“ä»»åŠ¡è½¬ç§»ç»™äº†å®¢æˆ·ç«¯ï¼Œè¿™åœ¨å¤§é‡ç”¨æˆ·è®¿é—®çš„æ—¶å€™å¤§å¤§å‡è½»åç«¯çš„å‹åŠ›ã€‚è®©åç«¯ä¸“æ³¨åšåç«¯åº”è¯¥åšçš„äº‹æƒ…ï¼Œæ€§èƒ½å°†å¤§å¤§æé«˜ã€‚</li>
<li>éšç€è¿™äº›å¹´Javascriptçš„å´›èµ·ï¼Œç‰¹åˆ«æ˜¯åœ¨Node.jså‡ºç°ä»¥å JS å·¥ç¨‹å¸ˆ ç»´æŠ¤åç«¯çš„æˆæœ¬å¤§å¤§é™ä½ã€‚</li>
<li>æœ€å¤§çš„åŒºåˆ«åœ¨äºä½¿ç”¨SSRæƒ…å†µä¸‹æœåŠ¡å™¨ç«¯å‘é€ç»™å‰ç«¯çš„æ˜¯å·²ç»<br>å‡†å¤‡å¥½çš„HTMLé¡µé¢ï¼›æ— éœ€ç­‰å¾…Javascriptä¸‹è½½å’Œæ‰§è¡Œå®Œã€‚  </li>
<li>ä½¿ç”¨SSRä¼šé¡µé¢ä¼šæå‰æ¸²æŸ“å¥½ï¼Œç”¨æˆ·èƒ½æ›´æ—©å¾—çœ‹åˆ°é¡µé¢ï¼Œä½†åœ¨JavaScriptåŠ è½½æ‰§è¡Œå®Œä¹‹å‰ï¼Œé¡µé¢ä»ç„¶æ˜¯ä¸å¯äº¤äº’çš„ï¼Œæ¯”å¦‚åœ¨è¿™ä¸ªåŒºé—´ç‚¹å‡»æŸä¸ªæŒ‰é’®ï¼Œå¹¶ä¸ä¼šè§¦å‘èµ·æ•ˆã€‚</li>
</ol>
<h6 id="å®¢æˆ·ç«¯æ¸²æŸ“"><a href="#å®¢æˆ·ç«¯æ¸²æŸ“" class="headerlink" title="#å®¢æˆ·ç«¯æ¸²æŸ“"></a>#å®¢æˆ·ç«¯æ¸²æŸ“</h6><p>ï¼ˆä»¥åŸºäºReactåšçš„SPAçš„é¡µé¢ä¸ºä¾‹è¯´æ˜åŠ è½½å’Œæ¸²æŸ“è¿‡ç¨‹ï¼‰<br>1ï¼‰å®¢æˆ·ç«¯è¯·æ±‚é¡µé¢èµ„æº ï¼›<br>2ï¼‰æœåŠ¡å™¨å…ˆè¿”å›index.htmlæ¨¡æ¿é¡µé¢ï¼›<br>3ï¼‰è¯·æ±‚JSã€CSSç­‰å…¶ä»–æ–‡ä»¶ï¼›<br>4ï¼‰Reactæ‰§è¡Œ,ç»„ä»¶æ ¹æ®ç”Ÿå‘½å‘¨æœŸåšä¸€äº›æ•°æ®åŠ è½½åˆå§‹åŒ–æ“ä½œï¼›<br>5ï¼‰Reactæ¸²æŸ“ç»„ä»¶å‘ˆç°é¡µé¢ï¼›ï¼ˆé¡µé¢å¯è§ã€å¯äº¤äº’ï¼‰  </p>
<p>åœ¨Chromeè®¾ç½®çš„â€œDebuggerâ€é‡Œç¦æ‰â€œDisable JavaScriptâ€é€‰é¡¹ï¼Œä¼šå‘ç°å®¢æˆ·ç«¯åªæ¥å—åˆ°ä¸€ä¸ªHTMLæ–‡ä»¶å’Œå¯¹åº”cssæ–‡ä»¶ï¼Œä½†é¡µé¢å¹¶æ²¡æœ‰å®é™…å†…å®¹ï¼Œç”±äºä¼ ç»Ÿçš„æœç´¢å¼•æ“åªä¼šä» HTML ä¸­æŠ“å–æ•°æ®ï¼Œå¯¼è‡´å‰ç«¯æ¸²æŸ“çš„é¡µé¢æ— æ³•è¢«æŠ“å–ã€‚åœ¨æ²¡æœ‰ç¼“å­˜å’Œç½‘é€Ÿä¸ç»™åŠ›çš„æƒ…å†µä¸‹ï¼Œè¿˜ä¼šå‡ºç°ç™½å±ç°è±¡ï¼Œè®©ç”¨æˆ·ç­‰å¾…ç™½å±ç»“æŸå¹¶éä¸€ä¸ªå¾ˆå¥½çš„ä½“éªŒï¼Œæ€»ç»“ä¸€ä¸‹å³ä¸¤ä¸ªç¼ºç‚¹ï¼š<br>a.ä¸åˆ©äºSEOï¼›<br>b.é¦–å±ä½“éªŒä¸ä½³ï¼› </p>
<h6 id="æœåŠ¡ç«¯æ¸²æŸ“"><a href="#æœåŠ¡ç«¯æ¸²æŸ“" class="headerlink" title="#æœåŠ¡ç«¯æ¸²æŸ“"></a>#æœåŠ¡ç«¯æ¸²æŸ“</h6><p>1ï¼‰å®¢æˆ·ç«¯è¯·æ±‚é¡µé¢èµ„æºï¼›<br>2ï¼‰æœåŠ¡ç«¯è¯·æ±‚é¡µé¢æ‰€éœ€æ•°æ®ï¼›<br>3ï¼‰æœåŠ¡å™¨æŠŠæ¸²æŸ“é¡µé¢,è¿”å›ç»™æµè§ˆå™¨ç«¯ï¼›ï¼ˆé¡µé¢å¯è§ï¼‰<br>4ï¼‰å®¢æˆ·ç«¯è¯·æ±‚JSå’ŒCSSç­‰å…¶å®ƒèµ„æºï¼›ï¼ˆé¡µé¢å¯è§ï¼‰<br>5ï¼‰Reactæ¸²æŸ“ç»„ä»¶å‘ˆç°é¡µé¢ï¼›ï¼ˆé¡µé¢å¯è§ã€å¯äº¤äº’ï¼‰<br><strong>ä¼˜ç‚¹</strong>ï¼š<br>a.åˆ©äºSEOï¼ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“å¯ä»¥è®©æœç´¢å¼•æ“æ›´å®¹æ˜“è¯»å–é¡µé¢çš„metaä¿¡æ¯ä»¥åŠå…¶ä»–SEOç›¸å…³ä¿¡æ¯ï¼Œå¤§å¤§å¢åŠ ç½‘ç«™åœ¨æœç´¢å¼•æ“ä¸­çš„å¯è§åº¦ã€‚<br>b.å‡å°‘é¡µé¢åˆå§‹åŒ–çš„åŠ è½½æ—¶é—´ï¼›<br>c.åŒæ„çš„æ€æƒ³ï¼Œä»£ç å¤ç”¨ï¼Œä¾¿äºç»´æŠ¤ï¼›<br>c.æœåŠ¡ç«¯æ¸²æŸ“ä¼šç»™æœåŠ¡ç«¯é€ æˆä¸€å®šçš„å‹åŠ›ï¼›</p>
<h5 id="SSRåº”ç”¨åœºæ™¯"><a href="#SSRåº”ç”¨åœºæ™¯" class="headerlink" title="#SSRåº”ç”¨åœºæ™¯"></a>#SSRåº”ç”¨åœºæ™¯</h5><p>1ï¼‰éœ€è¦SEOä¼˜åŒ–çš„é¡µé¢;<br>2ï¼‰å†…å®¹åˆ°è¾¾æ—¶é—´(time-to-content)ä¸è½¬æ¢ç‡ç›´æ¥ç›¸å…³çš„ä¸šåŠ¡;<br>3ï¼‰é¦–å±æ•°æ®é‡è¾ƒå¤§çš„é¡µé¢;</p>
<h5 id="ReactæœåŠ¡ç«¯æ¸²æŸ“åŸç†"><a href="#ReactæœåŠ¡ç«¯æ¸²æŸ“åŸç†" class="headerlink" title="#ReactæœåŠ¡ç«¯æ¸²æŸ“åŸç†"></a>#ReactæœåŠ¡ç«¯æ¸²æŸ“åŸç†</h5><p>Reactæä¾›renderToString å’Œ renderToStaticMarkupæ–¹æ³•ç”¨äºå°†Virtual DOMæ¸²æŸ“æˆHTMLå­—ç¬¦ä¸²ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“å‡ºæ¥çš„åªæ˜¯é™æ€DOMï¼Œè¿˜ä¸èƒ½ä½¿ç”¨Reactã€Reduxç­‰å®šä¹‰çš„State, props,äº‹ä»¶ç­‰ï¼Œå¿…é¡»åœ¨å®¢æˆ·ç«¯å®ä¾‹åŒ–React,è€Œåœ¨å®¢æˆ·ç«¯æ¸²æŸ“ä¹‹å‰éœ€è¦è·å–é¡µé¢åˆå§‹åŒ–æ‰€éœ€çš„æ•°æ®ã€‚    </p>
<p><strong>renderToStringå’ŒrenderToStaticMarkupçš„åŒºåˆ«</strong>ï¼š<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">renderToString(react element)</span><br><span class="line">renderToStaticMarkup(react element)</span><br></pre></td></tr></table></figure></p>
<p>ä¸¤ä¸ªæ–¹æ³•å‡æ¥å—Reactç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œä½¿ç”¨ renderToStaticMarkup æ¸²æŸ“å‡ºçš„æ˜¯ä¸å¸¦data-reactidçš„çº¯htmlï¼Œåœ¨å‰ç«¯react.jsåŠ è½½å®Œæˆå,ä¹‹å‰æœåŠ¡ç«¯æ¸²æŸ“çš„é¡µé¢ä¼šæŠ¹æ‰ä¹‹å‰æœåŠ¡ç«¯çš„é‡æ–°æ¸²æŸ“(å¯èƒ½é¡µé¢ä¼šé—ªä¸€ä¸‹)ï¼Œæ¢å¥è¯è¯´å‰ç«¯Reactä¸è®¤è¯†ä¹‹å‰æœåŠ¡ç«¯æ¸²æŸ“çš„å†…å®¹,renderæ–¹æ³•ä¼šä½¿ç”¨innerHTMLçš„æ–¹æ³•é‡å†™#react-targeté‡Œçš„å†…å®¹ï¼›</p>
<p>è€Œä½¿ç”¨renderToStringæ–¹æ³•æ¸²æŸ“çš„èŠ‚ç‚¹ä¼šå¸¦æœ‰data-reactidå±æ€§,åœ¨å‰ç«¯ReactåŠ è½½å®Œæˆå, å‰ç«¯Reactä¼šè®¤è¯†ä¹‹å‰æœåŠ¡ç«¯æ¸²æŸ“çš„å†…å®¹,ä¸ä¼šé‡æ–°æ¸²æŸ“DOMèŠ‚ç‚¹,Reactæ¥ç®¡é¡µé¢,æ‰§è¡Œ componentDidMoutç»‘å®šæµè§ˆå™¨äº‹ä»¶ç­‰è¿™äº›åœ¨æœåŠ¡ç«¯æ²¡å®Œæˆä¹Ÿä¸å¯èƒ½æ‰§è¡Œä»»åŠ¡ï¼›</p>
<h5 id="å¦‚ä½•æ­å»ºåŸºäºReactçš„æœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨"><a href="#å¦‚ä½•æ­å»ºåŸºäºReactçš„æœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨" class="headerlink" title="#å¦‚ä½•æ­å»ºåŸºäºReactçš„æœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨"></a>#å¦‚ä½•æ­å»ºåŸºäºReactçš„æœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨</h5><p><strong>åˆ©ç”¨React + Expresså®ç°</strong>ï¼š</p>
<p>1ï¼‰ç»“åˆReactã€React-routerã€Webpackç­‰æ­å»ºä¸€ä¸ªæœåŠ¡ç«¯æ¸²æŸ“é¡¹ç›®ï¼›<br>2ï¼‰åˆ©ç”¨ReactDOMServer.renderToString å’ŒrenderToStaticMarkupæ–¹æ³•ï¼›<br>3ï¼‰React-routeræä¾›å¯¹åº”äº†å¯¹åº”æœåŠ¡ç«¯æ¸²æŸ“æ–¹æ¡ˆï¼›<br>4ï¼‰ä½¿ç”¨expressæ­å»ºwebæœåŠ¡å™¨ï¼›  </p>
<p><strong>åˆ©ç”¨ç½‘ä¸Šçš„é›†æˆæ¡†æ¶</strong></p>
<p>ä¾‹å¦‚<a href="https://zeit.co/about" target="_blank" rel="noopener">Nextjs</a>ã€‚</p>
<p>ä»¥ç»“åˆReact + Express + RR + Reduxå®ç°æœåŠ¡ç«¯æ¸²æŸ“ä¸ºä¾‹å­ï¼Œçœ‹ä¸‹è¿™ä¸ªè¿‡ç¨‹éœ€è¦æ³¨æ„å“ªäº›é—®é¢˜ï¼š </p>
<p>1) React.renderToStringæ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥æ²¡æœ‰åŠæ³•ä½¿ç”¨ç»„ä»¶çš„ä»»ä½•ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œæ¥è·å–å¼‚æ­¥çš„æ•°æ®ï¼Ÿ  </p>
<p>2) ä½¿ç”¨Reduxè¿‡ç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯ç»„ä»¶éœ€è¦ä»æˆ‘ä»¬çš„storeä¸­æ‹¿ä¸€ä¸ªåˆå§‹åŒ–çš„çŠ¶æ€å€¼ï¼Œå³<strong>INITIAL_STATE</strong>  </p>
<p>3) å‰ç«¯æœ‰å¯¹åº”çš„è·¯ç”±åº“ï¼ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“æ€ä¹ˆå¤„ç†é¡µé¢è·³è½¬ï¼Ÿ  </p>
<p><strong>å¯¹åº”é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<p>1ï¼‰åœ¨ç»„ä»¶å†…å®šä¹‰staticæ–¹æ³•å¼‚æ­¥è¯·æ±‚æ•°æ®ï¼Œæ¸²æŸ“å‰å…ˆæ‰§è¡Œè¯·æ±‚è·å–é¡µé¢åˆå§‹æ•°æ®ï¼›</p>
<p>2ï¼‰Serverç«¯è·å–åˆå§‹æ•°æ® =&gt; ReactDOMServer.renderToString(<app>) =&gt; è·å–åˆå§‹stateæ’å…¥æ¨¡æ¿ä¸­=&gt; Clientä»£ç è·å–window.INITIAL_STATE =&gt; æ³¨å…¥<provider store="{initState}"> =&gt; å‰ç«¯Reactæ¥ç®¡é¡µé¢</provider></app></p>
<p>3ï¼‰æ ¹æ®å¯¹åº”çš„rulè·¯å¾„ï¼Œè¿”å›å¯¹åº”çš„ç»„ä»¶ï¼Œè·¯ç”±é—®é¢˜å¯ä»¥äº¤ç”±React-routerè§£å†³ï¼ŒReact-routerä¸ºæœåŠ¡ç«¯æ¸²æŸ“æä¾›äº†å¯¹åº”çš„è§£å†³æ–¹æ³•ï¼Œå¯ä»¥æŸ¥çœ‹ä¸‹é¢ä¸¤ä¸ªä¾‹å­ï¼š</p>
<p>v3ç‰ˆæœ¬ä¸­åœ¨æœåŠ¡å™¨ç«¯ç”¨ä¸€ä¸ª match æ–¹æ³•å°†æ‹¿åˆ°çš„ request url åŒ¹é…åˆ°æˆ‘ä»¬ä¹‹å‰å®šä¹‰çš„ routesï¼Œè§£ææˆå’Œå®¢æˆ·ç«¯ä¸€è‡´çš„ props å¯¹è±¡ä¼ é€’ç»™ç»„ä»¶ã€‚<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// V3 ç‰ˆæœ¬ä½¿ç”¨matchæ–¹æ³•</span></span><br><span class="line"><span class="keyword">const</span> ReactRouterContext = React.createFactory(RouterContext);</span><br><span class="line"><span class="keyword">const</span> ReduxProvider = React.createFactory(Provider);</span><br><span class="line">match(&#123; routes, <span class="attr">location</span>: req.url &#125;, (err, redirectLocation, renderProps) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        res.status(<span class="number">503</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (redirectLocation) &#123;</span><br><span class="line">        <span class="keyword">return</span> res.redirect(<span class="number">302</span>, redirectLocation.pathname + redirectLocation.search);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (renderProps) &#123;</span><br><span class="line">        <span class="keyword">return</span> res.send(<span class="string">`&lt;!DOCTYPE html&gt;<span class="subst">$&#123;ReactDOMServer.renderToString(</span></span></span><br><span class="line"><span class="string"><span class="subst">          ReduxProvider(&#123; store &#125;</span>, ReactRouterContext(renderProps)))&#125;`</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// v4ç‰ˆmatchæ–¹æ³•å·²å¼ƒç”¨</span></span><br><span class="line"><span class="keyword">const</span> context = &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> markup = ReactDOMServer.renderToString(</span><br><span class="line">  &lt;StaticRouter</span><br><span class="line">    location=&#123;req.url&#125;</span><br><span class="line">    context=&#123;context&#125;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;App/&gt;</span><br><span class="line">  &lt;<span class="regexp">/StaticRouter&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">if (context.url) &#123;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ Somewhere a `&lt;Redirect&gt;` was rendered</span></span><br><span class="line"><span class="regexp">  redirect(301, context.url)</span></span><br><span class="line"><span class="regexp">&#125; else &#123;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ we're good, send the response</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<h5 id="æ•´åˆReduxã€React-routerã€Express"><a href="#æ•´åˆReduxã€React-routerã€Express" class="headerlink" title="#æ•´åˆReduxã€React-routerã€Express"></a>#æ•´åˆReduxã€React-routerã€Express</h5><p>åç«¯ä½¿ç”¨expressæ­å»ºæœåŠ¡å™¨ï¼Œä¸ºå‰ç«¯æä¾›é™æ€èµ„æºæœåŠ¡ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ExpressæœåŠ¡å™¨</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">const</span> render = <span class="built_in">require</span>(<span class="string">'./handleServerRender.js'</span>)</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="keyword">const</span> port = <span class="number">2048</span>;</span><br><span class="line"></span><br><span class="line">app.use(<span class="string">'/dist'</span>, express.static(<span class="string">'./dist'</span>));</span><br><span class="line">app.use(<span class="string">'*'</span>, render.handleRender);</span><br><span class="line"></span><br><span class="line">app.listen(port, ()=&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`ğŸŒ  SSR Listening on port <span class="subst">$&#123;port&#125;</span>.`</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>é…åˆRedux:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®¢æˆ·ç«¯ app.js</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;history, store&#125; = <span class="keyword">this</span>.props</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;BaseLayout&gt;</span><br><span class="line">                &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">                    &lt;ConnectedRouter history=&#123;history&#125;&gt;</span><br><span class="line">                        &lt;RootRouters location=&#123;location&#125; /&gt; </span><br><span class="line">                    &lt;<span class="regexp">/ConnectedRouter&gt;</span></span><br><span class="line"><span class="regexp">                &lt;/</span>Provider&gt;</span><br><span class="line">            &lt;<span class="regexp">/BaseLayout&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">    App.propTypes = &#123;</span></span><br><span class="line"><span class="regexp">        store: PropTypes.object.isRequired,</span></span><br><span class="line"><span class="regexp">        history: PropTypes.object.isRequired</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">export default App</span></span><br></pre></td></tr></table></figure>
<p>æ¸²æŸ“å‰é€šè¿‡è°ƒç”¨staticå®šä¹‰é™æ€æ–¹æ³•è·å–é¡µé¢åˆå§‹åŒ–æ•°æ®ï¼ŒæœåŠ¡ç«¯é…åˆReact-routerçš„renderRoutesè¿›è¡Œé¡µé¢ç»„ä»¶æ¸²æŸ“ï¼Œæ³¨æ„React-router v4ç‰ˆå˜åŒ–è¾ƒå¤§ï¼Œä¹‹å‰çš„æ–¹æ³•å·²ç»è¢«å¼ƒç”¨ï¼š </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// preFetchData.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> preFetchData = <span class="function">(<span class="params">store, location</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> branch = matchRoutes(routes, location);</span><br><span class="line">    <span class="keyword">const</span> promises = branch.map(<span class="function">(<span class="params">&#123; route, match &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(route.component) &#123;</span><br><span class="line">            route.component.prefetch</span><br><span class="line">            ? route.component.prefetch(store, match)</span><br><span class="line">            : <span class="built_in">Promise</span>.resolve(<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.all(promises)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br>ä½¿ç”¨React-routeræä¾›çš„æœåŠ¡ç«¯æ¸²æŸ“æ–¹æ³•ï¼š<br><br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// handleServerRender.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> handleRender = <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> history = createMemoryHistory()</span><br><span class="line">    <span class="keyword">const</span> store = createdStore(<span class="string">''</span>, history)</span><br><span class="line">    <span class="keyword">const</span> initialState = store.getState()</span><br><span class="line">    <span class="keyword">return</span> preFetchData(store, res.url)</span><br><span class="line">        .then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> componentHtml = renderToString(</span><br><span class="line">                &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">                    &lt;ConnectedRouter history=&#123;history&#125;&gt;</span><br><span class="line">                         &lt;div&gt;</span><br><span class="line">                            &#123;renderRoutes(routes, &#123; ...data &#125;)&#125;</span><br><span class="line">                        &lt;<span class="regexp">/div&gt; </span></span><br><span class="line"><span class="regexp">                    &lt;/</span>ConnectedRouter&gt;</span><br><span class="line">                &lt;<span class="regexp">/Provider&gt;</span></span><br><span class="line"><span class="regexp">            )</span></span><br><span class="line"><span class="regexp">            return res.status(200).send(</span></span><br><span class="line"><span class="regexp">                html(componentHtml, initialState)</span></span><br><span class="line"><span class="regexp">            ); </span></span><br><span class="line"><span class="regexp">        &#125;)</span></span><br><span class="line"><span class="regexp">        .catch((err) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">            console.log(err);</span></span><br><span class="line"><span class="regexp">        &#125;)</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>åœ¨è¿”å›é™æ€å­—ç¬¦ä¸²æ¨¡æ¿å‡½æ•°é‡Œï¼Œå°†åˆå§‹stateæŒ‚è½½åœ¨windowä¸Šï¼Œæ–¹ä¾¿å®¢æˆ·ç«¯æ¸²æŸ“æ—¶ï¼ŒReduxçš„createStoreæ–¹æ³•è¿›è¡Œè°ƒç”¨:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æœåŠ¡ç«¯html.js</span></span><br><span class="line">&lt;script&gt; <span class="built_in">window</span>.__INITIAL_STATE__ = $&#123;<span class="built_in">JSON</span>.stringify(state)&#125; &lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®¢æˆ·ç«¯createStore.jss</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware &#125;  <span class="keyword">from</span> <span class="string">'redux'</span></span><br><span class="line"><span class="keyword">const</span> createdStore = <span class="function">(<span class="params">initState, history</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> middleware = [routerMiddleware(history)]</span><br><span class="line">    <span class="keyword">const</span> initialState = initState || &#123;&#125;;</span><br><span class="line">    <span class="comment">// config._ENV_ === 'development' ?</span></span><br><span class="line">    <span class="comment">//     middleware.push(createLogger()) : null</span></span><br><span class="line">    <span class="keyword">const</span> store = createStore(</span><br><span class="line">        reducer,</span><br><span class="line">        initialState,</span><br><span class="line">        applyMiddleware(...middleware)</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> store</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createdStore</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Reactæ¸²æŸ“rootèŠ‚ç‚¹main.js</span></span><br><span class="line"><span class="keyword">const</span> MOUNT_NODE = <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> render = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> history = createHistory()</span><br><span class="line">    <span class="keyword">const</span> initialState = <span class="built_in">window</span>.__INITIAL_STATE__</span><br><span class="line">    <span class="keyword">const</span> store = createdStore(initialState,history)</span><br><span class="line">    ReactDOM.render(</span><br><span class="line">        &lt;App </span><br><span class="line">            history=&#123;history&#125;</span><br><span class="line">            store=&#123;store&#125;</span><br><span class="line">        /&gt;, </span><br><span class="line">        MOUNT_NODE</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render()</span><br></pre></td></tr></table></figure>
<h5 id="å…³äºNext-js"><a href="#å…³äºNext-js" class="headerlink" title="#å…³äºNext.js"></a>#å…³äºNext.js</h5><p>Next.jsæ˜¯ä¸€ä¸ªå°å·§çš„åŸºäºReactã€Webpackã€Babelçš„å®¢æˆ·ç«¯æ¸²æŸ“universal JavasScript web appæ¡†æ¶ï¼Œä½“éªŒä¹‹åå®ƒç»™æˆ‘çš„æ„Ÿè§‰å°±æ˜¯å®ƒæä¾›äº†ä¸€ç§ä¾¿åˆ©çš„æ–¹å¼æ¥åˆ›å»ºæ–°çš„Webåº”ç”¨ï¼Œè¶³å¤Ÿç®€å•ï¼Œå¹¶ä¸”é›¶é…ç½®ï¼Œä½ ä¸ç”¨åœ¨é…ç½®Webpackã€Babelç­‰ä¸Šæµªè´¹å¤ªå¤šçš„æ—¶é—´ï¼Œæ‰€æœ‰çš„ä¸œè¥¿æ¡†æ¶éƒ½å·²ç»ç»™ä½ å‡†å¤‡å¥½ï¼Œå½“ç„¶å®ƒä¹Ÿæ”¯æŒå¼€å‘è€…å¯¹å…¶ä¸­çš„ä¸€äº›é…ç½®è¿›è¡Œæ‰©å±•ã€‚<br>æ€»ç»“ä¸€ä¸‹Next.jsçš„ç‰¹å¾ï¼š</p>
<p>1ï¼‰æœåŠ¡å™¨ç«¯æ¸²æŸ“(é»˜è®¤);<br>2ï¼‰è‡ªåŠ¨ä»£ç åˆ‡åˆ†, åŠ é€Ÿé¡µé¢åŠ è½½;<br>3ï¼‰ç®€å•çš„å®¢æˆ·ç«¯è·¯ç”±(åŸºäºé¡µé¢);<br>4ï¼‰åŸºäºWebpackçš„å¼€å‘ç¯å¢ƒ, æ”¯æŒçƒ­æ¨¡å—æ›¿æ¢(HMR: Hot Module Replacement);<br>5ï¼‰å¯ä»¥ä½¿ç”¨Express æˆ–å…¶ä»–Node.jsæœåŠ¡å™¨å®ç°;<br>6ï¼‰ä½¿ç”¨Babelå’ŒWebpacké…ç½®å®šåˆ¶;  </p>
<h5 id="ä½¿ç”¨Next-jsæ­å»ºSSRé¡¹ç›®"><a href="#ä½¿ç”¨Next-jsæ­å»ºSSRé¡¹ç›®" class="headerlink" title="#ä½¿ç”¨Next.jsæ­å»ºSSRé¡¹ç›®"></a>#ä½¿ç”¨Next.jsæ­å»ºSSRé¡¹ç›®</h5><p>ä»é›¶å¼€å§‹æ­å»ºä¸€ä¸ªåŸºäºNext.jsçš„webé¡¹ç›®ï¼š  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªé¡¹ç›®æ ¹ç›®å½•</span><br><span class="line">$ mkdir react-next-example</span><br><span class="line"></span><br><span class="line">// åˆ‡æ¢åˆ°é¡¹ç›®æ ¹ç›®å½•</span><br><span class="line">$ <span class="built_in">cd</span> react-next-example</span><br><span class="line"></span><br><span class="line">// ç”¨npmåˆå§‹åŒ–é¡¹ç›®</span><br><span class="line">$ npm init -y</span><br><span class="line"></span><br><span class="line">// å°†reactå’Œnextå®‰è£…åˆ°æœ¬åœ°ä¾èµ–</span><br><span class="line">$ cnpm i --save react react-dom next</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºè·¯ç”±æ–‡ä»¶å¤¹pages</span><br><span class="line">$ mkdir pages</span><br><span class="line"></span><br><span class="line">// å†™å…¥index.jsé¡µé¢</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cd</span> pages</span><br><span class="line">$ vi index.js</span><br></pre></td></tr></table></figure>
<p>æ·»åŠ å¦‚ä¸‹ä»£ç <br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> cssStyle = &#123;</span><br><span class="line">    color: <span class="string">'red'</span>,</span><br><span class="line">    fontSize: <span class="string">'25px'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (props) =&gt; (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h3 style=&#123;cssStyle&#125;&gt;Home page&lt;<span class="regexp">/h3&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// vi package.jsonæ·»åŠ è¿è¡Œå‘½ä»¤</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"dev"</span>: <span class="string">"next"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// æ‰§è¡Œå‘½ä»¤,åœ¨æµè§ˆå™¨3000ç«¯å£è®¿é—®è¯¥é¡µé¢</span><br><span class="line">$ npm run dev</span><br></pre></td></tr></table></figure>
<h5 id="Next-jså®è·µæ€»ç»“"><a href="#Next-jså®è·µæ€»ç»“" class="headerlink" title="Next.jså®è·µæ€»ç»“"></a>Next.jså®è·µæ€»ç»“</h5><p>ç›¸æ¯”äºè‡ªå·±æ­å»ºExpressæœåŠ¡å™¨æ¥å®ç°æœåŠ¡ç«¯çš„æ¸²æŸ“ï¼ŒNext.jsç›´æ¥ä¸€æ­¥åˆ°ä½ï¼Œå¸®æˆ‘ä»¬åšäº†å¾ˆå¤šå·¥ä½œï¼Œåœ¨ä½¿ç”¨Next.jsçš„æ—¶å€™ï¼Œå›å¤´å†æ¥çœ‹ä¸€ä¸‹Next.jsæ˜¯å¦‚ä½•å¤„ç†ä¸‹é¢å‡ ä¸ªé—®é¢˜çš„ï¼š  </p>
<h6 id="å¦‚ä½•è·å–åˆå§‹åŒ–æ•°æ®Propså’ŒçŠ¶æ€State"><a href="#å¦‚ä½•è·å–åˆå§‹åŒ–æ•°æ®Propså’ŒçŠ¶æ€State" class="headerlink" title="å¦‚ä½•è·å–åˆå§‹åŒ–æ•°æ®Propså’ŒçŠ¶æ€State?"></a>å¦‚ä½•è·å–åˆå§‹åŒ–æ•°æ®Propså’ŒçŠ¶æ€State?</h6><p>Next.jsæä¾›äº†getInitialPropsæ–¹ä¾¿è·å–åˆå§‹æ•°æ®ï¼Œä½ å¯ä»¥æŠŠå®ƒå½“æˆç»„ä»¶çš„å†…çš„ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œå¯ä»¥è¿™æ ·å®šä¹‰å®ƒï¼š<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">List</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> getInitialProps() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">data</span>: <span class="string">"List Data"</span> &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.props.data&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æˆ–è€…è¿™æ ·ï¼š<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> List = <span class="function">(<span class="params">&#123; data &#125;</span>) =&gt;</span> &lt;div&gt;&#123;data&#125;&lt;<span class="regexp">/div&gt;;</span></span><br><span class="line"><span class="regexp">Foo.getInitialProps = () =&gt; (&#123; data: "List Data" &#125;);</span></span><br></pre></td></tr></table></figure></p>
<h6 id="å¦‚ä½•å¤„ç†Ajaxå¼‚æ­¥è¯·æ±‚"><a href="#å¦‚ä½•å¤„ç†Ajaxå¼‚æ­¥è¯·æ±‚" class="headerlink" title="å¦‚ä½•å¤„ç†Ajaxå¼‚æ­¥è¯·æ±‚?"></a>å¦‚ä½•å¤„ç†Ajaxå¼‚æ­¥è¯·æ±‚?</h6><p>getInitialPropsä½¿æˆ‘ä»¬èƒ½å¤Ÿè·å–é¡µé¢æ‰€éœ€çš„æ•°æ®ï¼Œè¿™äº›æ•°æ®æœ‰å¯èƒ½æ˜¯éœ€è¦ä½¿ç”¨Ajaxä»æ¥å£æœåŠ¡ä¸­è·å–ï¼Œåœ¨Next.jsä¸­å¯ä»¥ä½¿ç”¨Promiseæ¥è¿›è¡Œå¼‚æ­¥è¯·æ±‚ï¼Œå½“ç„¶ä½ è¿˜å¯ä»¥ä½¿ç”¨async/awaitæ¥å®ç°ï¼š<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> index = <span class="function">(<span class="params">props</span>) =&gt;</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;Link  href=&#123;<span class="string">`/list?id=<span class="subst">$&#123;id&#125;</span>`</span>&#125;&gt;to list page&lt;<span class="regexp">/Link&gt;</span></span><br><span class="line"><span class="regexp">        &#123; props.strike ? props.strike.map((item, index) =&gt; &lt;div key=&#123;index&#125;&gt;</span></span><br><span class="line"><span class="regexp">            &lt;ul&gt;</span></span><br><span class="line"><span class="regexp">                &lt;li&gt;&#123;item.country&#125;&lt;/</span>li&gt;</span><br><span class="line">                &lt;li&gt;&#123;item.location&#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">                &lt;li&gt;&#123;item.date&#125;&lt;/</span>li&gt;</span><br><span class="line">            &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>div&gt;): <span class="literal">undefined</span> &#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">index.getInitialProps = async function() &#123;</span></span><br><span class="line"><span class="regexp">    const res = await fetch(`http:/</span><span class="regexp">/api.dronestre.am/</span>data<span class="string">`, ...headers)</span></span><br><span class="line"><span class="string">    const data = await res.json()</span></span><br><span class="line"><span class="string">    const strike = data.strike.slice(0,10)</span></span><br><span class="line"><span class="string">    return &#123; strike:  strike&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure></p>
<h6 id="è·¯ç”±çš„å¤„ç†"><a href="#è·¯ç”±çš„å¤„ç†" class="headerlink" title="è·¯ç”±çš„å¤„ç†?"></a>è·¯ç”±çš„å¤„ç†?</h6><p>Next.jsåŸºäºæ–‡ä»¶ç›®å½•ç»“æ„ä½œä¸ºè·¯ç”±ï¼Œå®ç°å‰ç«¯é¡µé¢è·³è½¬ï¼Œæ‰€ä»¥æ¯ä¸ªæ”¾åˆ°pagesæ–‡ä»¶å¤¹ä¸­çš„ç»„ä»¶å°†ä¼šè‡ªåŠ¨æ˜ å°„ä¸ºä¸€ä¸ªåŸºäºæœåŠ¡å™¨çš„è·¯ç”±ï¼Œæ¯”å¦‚ç£ç›˜ä¸Šçš„pages/about.jsç»„ä»¶å°†ä¼šè‡ªåŠ¨æœåŠ¡äº/aboutè¿™ä¸ªURLã€‚è¿™å¥—è·¯ç”±æ¯”React-routerç³»ç»Ÿç®€å•æ˜äº†,æ— éœ€å†å†™é¢å¤–çš„ä»£ç ç»„ç»‡è·¯ç”±ï¼Œä½†ä¸ªäººè®¤ä¸ºç¼ºç‚¹åœ¨äºå½“è·¯ç”±ç»“æ„è¾ƒå¤æ‚æ—¶å€™ï¼Œæ–‡ä»¶ç»“æ„çš„åµŒå¥—ä¹Ÿä¼šå˜å¾—å¤æ‚ï¼Œä¸ä¾¿äºç»´æŠ¤ã€‚ä¸¾ä¾‹å¦‚ä¸‹ï¼š   </p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ‰€æœ‰è·¯ç”±åŸºäºpagesæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ç›®å½•ç»“æ„ï¼š</span></span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ pages                       # pagesæ–‡ä»¶å¤¹</span><br><span class="line">â”‚   â”œâ”€â”€ index.js                # indexé¡µé¢ï¼Œä¹Ÿæ˜¯/é»˜è®¤è®¿é—®é¡µé¢,å¦‚æœæ²¡æœ‰æ‰¾åˆ°èµ„æºä¼šè·³è½¬åˆ°Next.jsè‡ªå¸¦çš„404é¡µé¢</span><br><span class="line">â”‚   â”œâ”€â”€ list.js                 # listé¡µé¢ï¼Œé€šè¿‡/listèƒ½è®¿é—®è¯¥é¡µé¢</span><br><span class="line">â”‚   â”œâ”€â”€ test-page.js            # test-pageé¡µé¢ï¼Œé€šè¿‡/test-page èƒ½è®¿é—®è¯¥é¡µé¢,'-'å’Œâ€˜_â€™å‡æ”¯æŒ</span><br><span class="line">â”‚   â””â”€â”€ home                    # index.jsé¡µé¢ï¼Œä¹Ÿæ˜¯/é»˜è®¤è®¿é—®é¡µé¢</span><br><span class="line">â”‚       â””â”€â”€ home.js             # homeé¡µé¢ï¼Œé€šè¿‡/homeæ— æ³•è®¿é—®åˆ°è¯¥é¡µé¢</span><br><span class="line">â”‚       â””â”€â”€ index.js            # homeé¡µé¢ï¼Œé€šè¿‡/homeèƒ½è®¿é—®åˆ°è¯¥é¡µé¢</span><br></pre></td></tr></table></figure>
<h6 id="CSSçš„å®ç°"><a href="#CSSçš„å®ç°" class="headerlink" title="CSSçš„å®ç°"></a>CSSçš„å®ç°</h6><p>Next.jsæä¾›ä¸¤ç§æ–¹æ¡ˆæ¥å®ç°CSSçš„æ¨¡å—åŒ–ï¼Œä¸€ç§æ˜¯styled-jsxæ–¹å¼ï¼Œå¦ä¸€ç§æ˜¯CSS-in-JSï¼š<br>styled-jsxå½¢å¼ï¼š  </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    Hello world</span><br><span class="line">    &lt;p&gt;scoped!<span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">    &lt;style jsx&gt;&#123;<span class="string">`</span></span><br><span class="line"><span class="string">      p &#123;</span></span><br><span class="line"><span class="string">        color: blue;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      div &#123;</span></span><br><span class="line"><span class="string">        background: red;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      @media (max-width: 600px) &#123;</span></span><br><span class="line"><span class="string">        div &#123;</span></span><br><span class="line"><span class="string">          background: blue;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    `</span>&#125;&lt;<span class="regexp">/style&gt;</span></span><br><span class="line"><span class="regexp">    &lt;style global jsx&gt;&#123;`</span></span><br><span class="line"><span class="regexp">      body &#123;</span></span><br><span class="line"><span class="regexp">        background: black;</span></span><br><span class="line"><span class="regexp">      &#125;</span></span><br><span class="line"><span class="regexp">    `&#125;&lt;/</span>style&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>
<p>CSS-in-JSæ–¹å¼ï¼š  </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; <span class="xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> '<span class="attr">red</span>' &#125;&#125;&gt;</span>hi there<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>æˆ–è€…è¿™æ ·ï¼š<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> cssStyle = &#123;</span><br><span class="line">    color: <span class="string">'red'</span>,</span><br><span class="line">    fontSize: <span class="string">'25px'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (props) =&gt; (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h3 style=&#123;cssStyle&#125;&gt;Test page&lt;<span class="regexp">/h3&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>é™„å‚è€ƒèµ„æ–™ï¼š  </p>
<p><a href="https://medium.com/@mjackson/universal-javascript-4761051b7ae9" target="_blank" rel="noopener">1.Universal JavaScript</a><br><a href="https://ebaytech.berlin/universal-web-apps-with-react-router-4-15002bb30ccb" target="_blank" rel="noopener">2.Universal JavaScript Apps with React Router 4</a><br><a href="https://learnnextjs.com/" target="_blank" rel="noopener">3.Start Learning Next.js to build server rendered JS web apps with React</a></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <ul class="post-copyright">
    <li class="post-copyright-author">
      <strong>æœ¬æ–‡ä½œè€…ï¼š</strong>
      wuxinhua
    </li>
    <li class="post-copyright-link">
      <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
      <a href="https://wuxinhua.com/2017/11/20/React-ssr-exploration/" title="ReactæœåŠ¡ç«¯æ¸²æŸ“(SSR)åˆæ¢">https://wuxinhua.com/2017/11/20/React-ssr-exploration/</a>
    </li>
    <li class="post-copyright-license">
      <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>
      æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> è®¸å¯åè®®ã€‚ä»»ä½•äººå¯ä»¥è¿›è¡Œè½¬è½½ã€åˆ†äº«ï¼Œä½†ä¸å¯åœ¨æœªç»å…è®¸çš„æƒ…å†µä¸‹ç”¨äºå•†ä¸šç”¨é€”ï¼
    </li>
  </ul>


      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/React/" rel="tag"># React</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/10/24/What-happen-from-input-the-URL-in-the-browser-to-the-page-bring-out-part2/" rel="next" title="ä»é¢è¯•é¢˜â€œè¾“å…¥URL...å‘ç”Ÿäº†ä»€ä¹ˆâ€å­¦åˆ°çš„(ä¸‹)">
                <i class="fa fa-chevron-left"></i> ä»é¢è¯•é¢˜â€œè¾“å…¥URL...å‘ç”Ÿäº†ä»€ä¹ˆâ€å­¦åˆ°çš„(ä¸‹)
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/12/13/The-think-of-sort-algorithms/" rel="prev" title="å¯¹æ¯”å‡ ç§å¸¸è§çš„æ’åºç®—æ³•">
                å¯¹æ¯”å‡ ç§å¸¸è§çš„æ’åºç®—æ³• <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="wuxinhua">
          <p class="site-author-name" itemprop="name">wuxinhua</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
           
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">34</span>
                <span class="site-state-item-name">æ—¥å¿—</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">25</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-5"><a class="nav-link" href="#å…³äºIsomorphicå’ŒUniversal"><span class="nav-number">1.</span> <span class="nav-text">#å…³äºIsomorphicå’ŒUniversal</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ä»€ä¹ˆæ˜¯æœåŠ¡ç«¯æ¸²æŸ“-SRR-ï¼Ÿ"><span class="nav-number">2.</span> <span class="nav-text">#ä»€ä¹ˆæ˜¯æœåŠ¡ç«¯æ¸²æŸ“(SRR)ï¼Ÿ</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#CSR-vs-SSR"><span class="nav-number">3.</span> <span class="nav-text">#CSR vs SSR</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#å®¢æˆ·ç«¯æ¸²æŸ“"><span class="nav-number">3.1.</span> <span class="nav-text">#å®¢æˆ·ç«¯æ¸²æŸ“</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#æœåŠ¡ç«¯æ¸²æŸ“"><span class="nav-number">3.2.</span> <span class="nav-text">#æœåŠ¡ç«¯æ¸²æŸ“</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#SSRåº”ç”¨åœºæ™¯"><span class="nav-number">4.</span> <span class="nav-text">#SSRåº”ç”¨åœºæ™¯</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ReactæœåŠ¡ç«¯æ¸²æŸ“åŸç†"><span class="nav-number">5.</span> <span class="nav-text">#ReactæœåŠ¡ç«¯æ¸²æŸ“åŸç†</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#å¦‚ä½•æ­å»ºåŸºäºReactçš„æœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨"><span class="nav-number">6.</span> <span class="nav-text">#å¦‚ä½•æ­å»ºåŸºäºReactçš„æœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#æ•´åˆReduxã€React-routerã€Express"><span class="nav-number">7.</span> <span class="nav-text">#æ•´åˆReduxã€React-routerã€Express</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#å…³äºNext-js"><span class="nav-number">8.</span> <span class="nav-text">#å…³äºNext.js</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ä½¿ç”¨Next-jsæ­å»ºSSRé¡¹ç›®"><span class="nav-number">9.</span> <span class="nav-text">#ä½¿ç”¨Next.jsæ­å»ºSSRé¡¹ç›®</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Next-jså®è·µæ€»ç»“"><span class="nav-number">10.</span> <span class="nav-text">Next.jså®è·µæ€»ç»“</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#å¦‚ä½•è·å–åˆå§‹åŒ–æ•°æ®Propså’ŒçŠ¶æ€State"><span class="nav-number">10.1.</span> <span class="nav-text">å¦‚ä½•è·å–åˆå§‹åŒ–æ•°æ®Propså’ŒçŠ¶æ€State?</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#å¦‚ä½•å¤„ç†Ajaxå¼‚æ­¥è¯·æ±‚"><span class="nav-number">10.2.</span> <span class="nav-text">å¦‚ä½•å¤„ç†Ajaxå¼‚æ­¥è¯·æ±‚?</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#è·¯ç”±çš„å¤„ç†"><span class="nav-number">10.3.</span> <span class="nav-text">è·¯ç”±çš„å¤„ç†?</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#CSSçš„å®ç°"><span class="nav-number">10.4.</span> <span class="nav-text">CSSçš„å®ç°</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2022</span>
  <span class="author" itemprop="copyrightHolder">Created with </span>
  <span class="with-love">
    <i class="fa fa-heart"></i> 
  </span> by <a class="theme-link" href="https://github.com/M1seRy">
     wuxinhua
   </a>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

 <div class="theme-info">
  Host by
    <a class="theme-link" href="https://www.aliyun.com/">
    Aliyun 
   </a>
 </div>



        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>











  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  






  





  

  

  

  

  

  

  <div class="galleria"></div>
<script type="text/javascript">
    console.log('äººç”Ÿå¦‚é€†æ—…ï¼Œæˆ‘äº¦æ˜¯è¡Œäººã€‚')
</script>
  
</body>
</html>
